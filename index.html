<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {

            function animationTimer(){
                canChange = true;                
            }

            var moveCinderella = $('#moveCinderella');

            // var cinderWidth = document.getElementById("moveCinderella").offsetWidth;
            // var currentPos = 0;
            // var maxPos = cinderWidth - document.getElementById("cinderella").offsetWidth;

            var nImg = 39;
            var imgNum = $('#moveCinderella img').length;
            var prevValue = 0;
            var currValue = 0;
            var canChange = true;
            

            var textMessage = document.getElementById("textMessage");
            var playButton = document.getElementById("playButton");

            playButton.onclick = function(){
                textMessage.style.visibility = "visible";
            };

            var slider = document.getElementById("slider");

            slider.oninput = function() {

                if(this.value <= 50){
                    document.getElementById("firstFade").style.opacity = this.value / 100 * 2;
                } else{
                    document.getElementById("firstFade").style.opacity = ((100 - this.value) / 100) * 2;
                }
                
                if(canChange)
                {
                    canChange = false;
                    currValue = this.value;
                    setTimeout(animationTimer, 2);

                    if(currValue>prevValue){
                        nImg++;                          
                    }else{
                        nImg--;                        
                    }

                    if(nImg >= imgNum){
                        nImg = 0; 
                    }
                    if(nImg < 0){ 
                        nImg = imgNum-1; 
                    }
                    
                    $(".animated").each(function(){ 
                        $(this).removeClass("show")            
                    });
                    $(".animated").eq(nImg).addClass("show");
                    
                    document.getElementById("moveCinderella").style.left = (this.value / 2) + "%";
                    
                    prevValue = this.value;               
                }
            };
        });
    </script>        
</head>
<body>
    <article class="comic">
        <div class="panel" id="firstPanel">
            <p class="text top-left">One day, Cinderella and her stepsisters got invited to a party held by the prince. Unfortunately for Cinderella, her stepsisters took all the nice clothes she could wear for the event.</p>
            <div id="cinderellaFirstPanel">
                <img src="cinderellaFirstPanel.png" alt="">
                <p class="speech">Oh no! I have nothing to wear!</p>
            </div>         
            <p class="text bottom-right">Suddenly, she heard a message notification on her phone...</p>            
        </div>
        <div class="panel" id="secondPanel">
            <p class="text top-left">She unlocked her phone and saw a voice message.</p>
            <div id="handSecondPanel">
                <img src="phone.png" alt="">           
                <p id="textMessage" class="speech" style="visibility: hidden;">Come to Alba Denim at...</p>
                <a id="playButton" class="round-button"><i class="fa fa-play fa-2x"></i></a>
            </div>
            <p class="text bottom-right">And then...</p>
        </div>
        <div class="panel">
            <p class="text top-left" id="firstFade" style="opacity: 0;">Fade in Fade out</p>
            <div id="moveCinderella">
                <img id="cinderella" src="Comp 1_00000.png" class="animated show">
                <img id="cinderella" src="Comp 1_00001.png" class="animated">
                <img id="cinderella" src="Comp 1_00002.png" class="animated">
                <img id="cinderella" src="Comp 1_00003.png" class="animated">
                <img id="cinderella" src="Comp 1_00004.png" class="animated">
                <img id="cinderella" src="Comp 1_00005.png" class="animated">
                <img id="cinderella" src="Comp 1_00006.png" class="animated">
                <img id="cinderella" src="Comp 1_00007.png" class="animated">
                <img id="cinderella" src="Comp 1_00008.png" class="animated">
                <img id="cinderella" src="Comp 1_00009.png" class="animated">
                <img id="cinderella" src="Comp 1_00010.png" class="animated">
                <img id="cinderella" src="Comp 1_00011.png" class="animated">
                <img id="cinderella" src="Comp 1_00012.png" class="animated">
                <img id="cinderella" src="Comp 1_00013.png" class="animated">
                <img id="cinderella" src="Comp 1_00014.png" class="animated">
                <img id="cinderella" src="Comp 1_00015.png" class="animated">
                <img id="cinderella" src="Comp 1_00016.png" class="animated">
                <img id="cinderella" src="Comp 1_00017.png" class="animated">
                <img id="cinderella" src="Comp 1_00018.png" class="animated">
                <img id="cinderella" src="Comp 1_00019.png" class="animated">
                <img id="cinderella" src="Comp 1_00020.png" class="animated">
                <img id="cinderella" src="Comp 1_00021.png" class="animated">
                <img id="cinderella" src="Comp 1_00022.png" class="animated">
                <img id="cinderella" src="Comp 1_00023.png" class="animated">
                <img id="cinderella" src="Comp 1_00024.png" class="animated">
                <img id="cinderella" src="Comp 1_00025.png" class="animated">
                <img id="cinderella" src="Comp 1_00026.png" class="animated">
                <img id="cinderella" src="Comp 1_00027.png" class="animated">
                <img id="cinderella" src="Comp 1_00028.png" class="animated">
                <img id="cinderella" src="Comp 1_00029.png" class="animated">
                <img id="cinderella" src="Comp 1_00030.png" class="animated">
                <img id="cinderella" src="Comp 1_00031.png" class="animated">
                <img id="cinderella" src="Comp 1_00032.png" class="animated">
                <img id="cinderella" src="Comp 1_00033.png" class="animated">
                <img id="cinderella" src="Comp 1_00034.png" class="animated">
                <img id="cinderella" src="Comp 1_00035.png" class="animated">
                <img id="cinderella" src="Comp 1_00036.png" class="animated">
                <img id="cinderella" src="Comp 1_00037.png" class="animated">
                <img id="cinderella" src="Comp 1_00038.png" class="animated">                
              </div>
            <div class="slider">
                <input type="range" min="0" max="200" value="0" class="slider" id="slider">

            </div>
        </div>
        <div class="panel">
            <p class="speech">A speech bubble</p>
        </div>
        <div class="panel">
            <p class="speech">A speech bubble</p>
        </div>
      </article>    
</body>
</html>