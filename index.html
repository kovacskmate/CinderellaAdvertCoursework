<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {

            function animationTimer(){
                canChange = true;                
            }

            var moveCinderella = $('#moveCinderella'),
                nImg = 0,
                imgNum = $('#moveCinderella img').length,
                topDiv = (moveCinderella.offset() || { "top": NaN }).top,
                canChange = true;

            var slider = document.getElementById("slider");

            var textMessage = document.getElementById("textMessage");
            var playButton = document.getElementById("playButton");

            playButton.onclick = function(){
                textMessage.style.visibility = "visible";
            };

            slider.oninput = function() {
                console.log(this.value);
                if(this.value <= 50){
                    document.getElementById("firstFade").style.opacity = this.value / 100 * 2;
                } else{
                    document.getElementById("firstFade").style.opacity = ((100 - this.value) / 100) * 2;
                }
                
                if(canChange)
                {
                    console.log("summit");
                    canChange = false;
                    setTimeout(animationTimer, 100);
                    var y = $(this).scrollTop();        
                    if(y>topDiv){
                        nImg++;   
                    }else{
                        nImg--;   
                    }
                    if(nImg>=imgNum){ nImg = 0; }
                    if(nImg<0){ nImg = imgNum-1; }
                    
                    $(".animated").each(function(){ 
                        $(this).removeClass("show")            
                    });
                    $(".animated").eq(nImg).addClass("show");
                }
            };
        });
    </script>        
</head>
<body>
    <article class="comic">
        <div class="panel" id="firstPanel">
            <p class="text top-left">One day, Cinderella and her stepsisters got invited to a party held by the prince. Unfortunately for Cinderella, her stepsisters took all the nice clothes she could wear for the event.</p>
            <div id="cinderellaFirstPanel">
                <img src="cinderellaFirstPanel.png" alt="">
                <p class="speech">Oh no! I have nothing to wear!</p>
            </div>         
            <p class="text bottom-right">Suddenly, she heard a message notification on her phone...</p>            
        </div>
        <div class="panel" id="secondPanel">
            <p class="text top-left">She unlocked her phone and saw a voice message.</p>
            <div id="handSecondPanel">
                <img src="phone.png" alt="">           
                <p id="textMessage" class="speech" style="visibility: hidden;">Come to Alba Denim at...</p>
                <a id="playButton" class="round-button"><i class="fa fa-play fa-2x"></i></a>
            </div>
            <p class="text bottom-right">And then...</p>
        </div>
        <div class="panel">
            <p class="text top-left" id="firstFade" style="opacity: 0;">Fade in Fade out</p>
            <div id="moveCinderella">
                <img src="Comp 1_00000.png" class="animated show">
                <img src="Comp 1_00001.png" class="animated">
                <img src="Comp 1_00002.png" class="animated">
                <img src="Comp 1_00003.png" class="animated">
                <img src="Comp 1_00004.png" class="animated">
                <img src="Comp 1_00005.png" class="animated">
                <img src="Comp 1_00006.png" class="animated">
                <img src="Comp 1_00007.png" class="animated">
              </div>
            <div class="slider">
                <input type="range" min="0" max="100" value="0" class="slider" id="slider">
                <!-- <input type="range"> -->
            </div>
        </div>
        <div class="panel">
            <p class="speech">A speech bubble</p>
        </div>
        <div class="panel">
            <p class="speech">A speech bubble</p>
        </div>
      </article>    
</body>
</html>